Продукционный метод синтеза автоматических регуляторов непрерывно-дискретных систем управления



1. Введение 

В гибридных непрерывно-дискретных системах управления (ГНДСУ) компоненты с непрерывными сигналами отражают физические законы, технологические или технические принципы, которым подчинено функционирование объектов управления, а дискретные элементы моделируют работу цифровых управляющих устройств. К гибридным относится широкий круг систем управления, охватывающий как традиционные, так и новейшие технологии в самых различных областях техники. Задачи управления гибридными системам качественно сложнее аналогичных задач для непрерывных или дискретных систем ввиду целого ряда принципиальных особенностей гибридных систем, связанных с наличием в них существенным образом взаимодействующих непрерывных и дискретных подсистем, сочетанием непрерывной динамики управляемых процессов с дискретными процедурами получения информации о параметрах объекта, вычисления по этим данным управляющих воздействий и передачи их на исполнительные устройства. К такого рода особенностям прежде всего относятся: 

− влияние определяющего характера эффекта квантования сигналов по времени и по уровню на качественные показатели ГНДСУ; 

− влияние и возможности использования в качестве управляющих воздействий целого комплекса сильнодействующих специфических возмущающих факторов, таких, в частности, как случайные временные задержки и частичные потери информации при передаче управляющих воздействий; 

− необходимость учета комплекса шумовых составляющих сигналов в замкнутом контуре системы; 

− существенное (часто определяющее) влияние характеристик и свойств информационных каналов и сетевых связей на формирование управляющих алгоритмов; 

− возможности автоматического формирования и видоизменения в режиме реального времени алгоритмов управления на основе получаемой в процессе функционирования ГНДСУ рабочей информации о поведении системы и вытекающих отсюда требований к разработке вычислительных процедур, реализующих эти алгоритмы с требуемой динамикой; 

− необходимость учета ограничений со стороны аппаратных средств. Указанные задачи непосредственно относятся к сформулированной в Программе фундаментальных научных исследований Российской академии наук проблеме создания единой теории управления, вычислений и сетевых связей, разработки методов автоматического синтеза алгоритмов управления с одновременными их верификацией и валидацией на базе технических устройств, самостоятельно генерирующих свое программное обеспечение. На этом пути возникает ряд представляющих самостоятельный теоретический и практический интерес задач по разработке новых способов синтеза оптимальных по принятым критериям эффективности алгоритмов и программ работы цифровых устройств управления для ГНДСУ в условиях учета целого комплекса разнообразных возмущающих воздействий и ресурсных ограничений, характерных для цифровых и сетевых систем управления. 

В статье рассматривается один из возможных подходов к указанному кругу задач — применение продукционного метода описания регуляторов в задачах синтеза гибридных непрерывно-дискретных систем управления. Метод базируется на рассмотренной в [1] математической модели системы цифрового управления непрерывным объектом, динамическая часть которой, моделирующая функционирование объекта управления, описывается дифференциальными уравнениями, а дискретная часть, моделирующая работу устройства управления, — специальным численным алгоритмом его работы в виде системы продукций (набора правил вида «условие-действие»), структура и содержание которой автоматически формируются в процессе поиска оптимальных решений. Рассмотрены продукционные методы синтеза автоматических регуляторов технических систем управления, базирующиеся на совместном использовании достаточных условий оптимальности и процедуры конечномерной оптимизации. Рассмотрены также интеллектуальные методы синтеза продукционных моделей автоматических регуляторов с использованием генетического алгоритма и генетического программирования. 

2. Общая характеристика предлагаемых методов синтеза регуляторов с продукционными алгоритмами функционирования 

Известные методы формирования и использования продукционных вариантов описания регулятора (в частности, на основе четкой и нечеткой логики) не предполагают формирования алгоритма управления с учетом всего комплекса взаимосвязанных принципиальных особенностей, привносимых цифровым характером управляющих устройств, сетевым способом обмена информацией между ними и необходимостью построения вычислительной технологии с учетом указанных факторов. Кроме того, известные алгоритмы с фиксированной логикой не обеспечивают автоматического формирования алгоритма управления в темпе с управляемым процессом на основе рабочей информации о поведении объекта, получаемой по сигналам обратных связей. 

Предложена постановка нового класса задач структурного и параметрического синтеза систем управления, отличающаяся тем, что алгоритм функционирования регулятора представлен в явной продукционной форме автоматически формируемых вычислительных операций, за счет чего обеспечивается учет принципиальных особенностей, привносимых цифровым характером устройств управления и сетевым способом обмена информацией между ними, а наполнение правил вида «условие-действие» работы регулятора и, возможно, их количество, подлежат определению в процессе синтеза. 

Продукционная (алгоритмическая) форма описания регуляторов позволяет унифицировать задачу их синтеза. Действительно, процедура синтеза регулятора может быть описана единообразно: вне зависимости от конкретной задачи определению подлежит количество элементов системы продукций (пар типа «условие-действие») и ее наполнение (рис. 1). 

При этом вместо классической многоступенчатой процедуры синтеза системы продукций регулятора (рис. 2), включающей последовательность операций по выбору структуры регулятора, определению его параметров, разработке реализующих этот регулятор алгоритма и программного кода, используется прямой синтез (рис. 3) программы действий регулятора — системы правил, т. е. алгоритма его работы в виде псевдокода. 

Элементами продукционной модели регулятора, изменяющимися в процессе поиска оптимальных решений и, возможно, изменяющимися в процессе работы регулятора, являются: количество n правил; 

Существенной особенностью предлагаемого метода является допущение вариативности не только консеквентной части системы правил, но и антецедентной их части, условий срабатывания регулятора. Этим, наряду с непрерывно-дискретными системами с переключениями в заранее заданные тактовые моменты времени (time-based соntrol), в число потенциальных решений включаются также логико-динамические системы с переключениями в произвольные (обусловленные наступлением некоторых событий) моменты времени (event-based соntrol). А для непрерывно-дискретных систем допустимой становится аритмия, колебания шага квантования регулятора по времени вследствие изменений условий работы системы. Причем такие колебания могут быть следствием изменения времени вычисления и передачи информации по каналам связи и иметь негативные последствия либо обусловливаться алгоритмом управления, носить детерминированный характер и повышать качество работы системы управления. Классическая схема требует  k m n циклов итерационного процесса синтеза регулятора, в предлагаемом варианте циклов, исключается выделенный серым цветом на рис. 2 необходимо лишь k m⋅ цикл выбора структуры регулятора. 

Предельно универсальная форма описания обеспечивает полную свободу выбора структуры регулятора и закона управления. Любой иной подход предполагает, что мы заранее определяем вид регулятора. Как правило, решающим фактором при этом является то, какой метод решения задачи синтеза планируется использовать. Применение продукционного метода синтеза такое ограничение снимает. Выбор структуры регулятора и законов управления осуществляется в зависимости от поставленной задачи, а не от метода ее решения. Более того, в ходе синтеза структура регулятора и законы управления могут многократно меняться. При определении в процессе синтеза системы продукций можно заранее задать разрешенный набор составляющих ее компонентов (допустимый тезаурус элементов-«условий» и элементов-«действий»). Все это выгодно отличает рассматриваемый метод от известных. 

Не исключено привнесение неформального творческого элемента в практику проектирования систем управления. Процесс синтеза можно организовать с использованием знаний эксперта. В качестве системы продукций могут использоваться правила, полученные эмпирически или аналитически. 

Вместе с тем следует подчеркнуть, что в настоящее время общий формализованный метод решения задачи синтеза регуляторов в продукционной форме отсутствует. Здесь можно пока указать лишь некоторые частные способы, базирующиеся на различных подходах к синтезу системы продукций (т. е. определению количества пар типа «условие-действие» и конкретного содержания каждого элемента-«условия» и каждого элемента-«действия»). 

Поскольку большинство задач науки и техники относятся к обширному классу проблем поиска оптимальных решений, в основе обоих подходов к синтезу системы правил работы регулятора лежит процедура оптимизации. Необходимость обеспечить достижение предельно возможных технико-экономических показателей работы промышленного оборудования требует разработки методов усовершенствования его конструкционных характеристик и соответствующей организации режимов функционирования, оптимальных по тем или иным критериям эффективности. 

При оптимизационном подходе искомые элементы проектируемой системы определяются в результате решения различных оптимизационных задач. При этом весь комплекс условий, требований и ограничений для проектируемой системы сводится к задаче поиска экстремума того или иного функционала на определенном допустимом множестве настраиваемых элементов. 

Первый из подходов — процедура синтеза системы продукций с использованием необходимых (и/или достаточных) условий оптимальности. В основе оптимизационных задач — формализация представления о качестве функционирования систем управления. Подобная формализация предполагает построение некоторой системы количественных характеристик качества функционирования, величины которых зависят от принимаемых проектных решений. Не менее существенным представляется вопрос задания и обеспечения ограничений. В процедуре императивного синтеза регулятора необходим, естественно, учет традиционных видов ограничений на фазовые переменные, управляющие воздействия и время регулирования (т. е. на непрерывные состояния гибридного автомата). Однако помимо этого должна быть сформулирована система ограничений, выполнение которых обеспечит бездефектность системы продукций и корректность ее работы. 

Второй подход — автоматизация процедуры синтеза системы продукций посредством эволюционных вычислений как стохастического метода глобальной оптимизации. Этот подход позволит в перспективе создавать технические устройства, которые будут самостоятельно генерировать программное обеспечение своих систем управления и при необходимости модернизировать его. На базе этого подхода можно будет создать программные средства, которые автоматизируют процесс проектирования систем управления, включая моделирование их работы и проверку программного обеспечения. 

1. Численно-аналитическая процедура оптимального синтеза продукционной модели регулятора 

Пусть поведение системы управления, структурная схема которой приведена на рис. 4, описывается совокупностью линейных дифференциальных и разностных уравнений 

Определению подлежат моменты 

− разбиения промежутка времени функционирования системы T  на непересекающиеся подинтервалы и действующий в пределах каждого подинтервала 

Поставленная задача естественным образом разбивается на две подзадачи (рис. 5). Для определения моментов kt  (− как параметров режима работы 

регулятора (см. рис. 5а) используется один из численных методов глобальной оптимизации. Эта процедура является внешней по отношению к процессу вычисления предельно возможного значения критерия качества оптимального управления с полной обратной связью (см. рис. 5б), который должен выполняться на каждом шаге внешней процедуры при фиксированных значениях параметров регулятора. Внутренняя аналитическая процедура, подробно описанная в [2], базируется на достаточных условиях оптимальности позиционного закона управления с полной обратной связью и состоит в решении на каждом из временных подинтервалов задачи Коши для уравнения с частными производными первого порядка относительно функции Беллмана. Так, в линейном случае функция Беллмана ищется в виде Алгоритм вычисления оптимального управления состоит из следующей последовательности шагов: 

1. Из конечного условия (6) определяются матрицы 

Выделим основные достоинства численно-аналитической процедуры: 

− в соответствии со сформулированным в разделе 1 допущением для регуляторов непрерывно-дискретных систем аритмии как колебаний шага квантования регулятора по времени определению подлежат моменты kt

− разбиения промежутка времени функционирования системы T  на непересекающиеся подинтервалы и действующий в пределах kT локальный вариант закона оптимального управления k

− численные методы оптимизации, используемые при определении моментов разбиения промежутка времени функционирования системы на непересекающиеся подинтервалы, позволяют выявлять глобально-оптимальные настройки и режим работы регулятора; 

− для каждой комбинации моментов разбиения промежутка времени функционирования системы на непересекающиеся подинтервалы вычисляется свой набор вариантов локального закона оптимального управления с полной обратной связью, чем определяется точное решение задачи оптимального управления; 

− критерий качества (3) весьма общего вида, позволяет решать разнообразные задачи; значение критерия качества может быть рассчитано по формуле (8) без определения оптимального управления, что позволяет снизить объем вычислений на промежуточных этапах поиска оптимальных настроек и режимов работы регулятора. 

Помимо этого, такой подход позволяет поставить и решить ряд новых задач, а 

− уже известные рассматривать с единых вычислительных позиций. 

2. Процедура оптимального синтеза продукционной модели регулятора прямым методом — псевдоспектральным методом Гаусса 

Рассмотренная в разделе 2 численно-аналитическая процедура оптимального синтеза продукционной модели регулятора основана на совместном использовании методов конечномерной оптимизации для поиска моментов срабатывания регулятора и числа срабатываний (т. е. количества правил системы продукций и части «условие» каждого из них) и базирующейся на достаточных условиях оптимальности аналитической процедуры поиска на каждом из временных интервалов закона управления с полной обратной связью (части «действие» каждого из правил). Такой метод позволяет решать задачи синтеза управления линейными объектами, оптимального по квадратичному критерию качества. Однако попытка использовать его для решения более широкого круга задач сопряжена с рядом проблем, подчас трудноразрешимых. Так, затруднен синтез системы продукций регулятора, управляющего нелинейным объектом. Причина — невозможность установления в этом случае аналитического выражения для функции Беллмана. Определенные трудности представляет синтез системы продукций регулятора при наличии ограничений на фазовые переменные и управляющие воздействия. 

Частично снять эти проблемы можно при использовании альтернативного варианта, в основе которого — один из прямых методов решения задач оптимального управления, псевдоспектральный метод Гаусса [3, 4]. В этой разновидности метода коллокаций, применяя дискретизацию непрерывной задачи посредством аппроксимации переменных состояния и управляющих переменных интерполяционными полиномами, сводят ее к задаче нелинейного программирования, которая далее решается известными методами. 

Таким способом может быть решена задача достаточно общего вида. А именно, пусть управляемый процесс состоит из P этапов с номерами 

Эта «многоэтапная» задача разбивается на P связанных граничными условиями для непрерывных переменных подзадач. Каждая подзадача описывает условия общей задачи на одном из этапов и является непрерывной задачей Больца. Любой прямой подход к решению непрерывной задачи Больца предполагает сведение ее к задаче нелинейного программирования посредством дискретизации. Так, псевдоспектральный метод Гаусса основан на аппроксимации траектории состояний и управления интерполяционными полиномами. В результате решения задачи нелинейного программирования определяется набор оптимальных программных управлений. Структура этого управления определяет количество правил продукционной модели регулятора как число интервалов постоянства закона изменения оптимального управления. 

3. Синтез продукционной формы регулятора с использованием генетического алгоритма 

Эволюционные вычислительные методы [5, 6] — группа алгоритмов, использующих в своей основе идею эволюции Дарвина. Эти алгоритмы традиционно разделяют на генетические алгоритмы (ГА) и генетическое программирование (ГП). ГА [7, 8] в основном предназначены для поиска решения оптимизационных задач в виде набора параметров. Структуры данных (векторы вещественных или целых чисел), которыми они манипулируют, являются аналогами генов живых организмов. Алгоритм использует механизмы скрещивания, мутационной изменчивости и отбора для приспособления к условиям окружающей среды, критерием качества которого служит значение целевой функции исходной оптимизационной задачи. Этот алгоритм состоит из нескольких этапов (рис. 6): генерация случайным образом начальной популяции (набора решений), отбор родительских пар (особей с наилучшим значением критерия качества), их скрещивание и мутация (под скрещиванием понимается «обмен» родителей некоторой частью элементов массива, под мутацией — изменение случайным образом элементов массива какой-то особи). Если лучшее решение в популяции не удовлетворяет критериям поиска, то вновь повторяем процесс, иначе — заканчиваем вычисления. 

Признанием эффективности генетического алгоритма как метода глобальной оптимизации явилось включение в состав пакета MATLAB средства GADS (Genetic Algorithm and Direct Search) Toolbox, который в последних версиях MATLAB получил название Global Optimization Toolbox. ГА — стохастический метод глобальной J x  в условиях дей параметрической оптимизации — позволяет определять min ( )

формирующим систему продукций вида «если 

и, таким образом, задающим порядок изменения алгоритма работы регулятора, последовательность смены и время действия каждого локального варианта управления. Однако, поскольку в ГА требуется производить анализ большого числа альтернативных вариантов решения, время расчетов велико. Для преодоления этого недостатка процедуру вычисления управляющих воздействий целесообразно совместить с процессом управления. Разработан эволюционный метод ускоренного решения задач оптимального синтеза системы продукций регулятора ГНДСУ как алгоритма с отсечением по времени [9]. Алгоритм с отсечением по времени (anytime algorithm) — итерационный вычислительный алгоритм, который способен в любое время выдать наилучшее на данный момент решение. При совместном применении алгоритма с отсечением по времени и эволюционного метода следует, не дожидаясь окончания вычислений, раз в несколько эпох выбирать наилучшее решение. Это решение используется некоторое время как текущее управляющее воздействие. Создано программное средство, автоматизирующее процесс проектирования систем управления, включая моделирование их работы и проверку программного обеспечения. 

4. Синтез продукционной формы регулятора с использованием генетического программирования 

Генетическое программирование [10] применяет теорию эволюции не к данным, а к программному коду. Эта область, считавшаяся бесперспективной вплоть до начала 90-х годов, теперь бурно развивается, в том числе для решения задач в области автоматизации [11, 12]. В генетическом программировании особи из популяции — это компьютерные программы. Удобно задавать эти программы в виде ветвей деревьев, где функции представлены внутренними узлами, к которым присоединены поддеревья, играющие роль входных параметров. Листьями такого дерева (терминалами) будут константы, входные параметры задачи или директивные команды программы. Так, на рис. 7 представлено дерево программы Каждая компьютерная программа (т. е. дерево или эквивалентное ему математическое выражение) является композицией функций из множества функций и терминалов из терминального множества. Пространством поиска алгоритма ГП является множество всех возможных рекурсивных композиций функций, формируемых из этих множеств. «Скрещивание» двух программ будет заключаться в замене одного из поддеревьев первого предка на какое-либо поддерево второго предка. При «мутации» программы будет осуществляться случайное изменение случайно выбранного фрагмента дерева. Далее задается мера приспособленности (критерий качества), контролирующие эволюцию параметры и критерий останова эволюции. После этого можно запускать процесс вычисления лучшей особи. Легко заметить, что последовательность шагов ГП в общих чертах совпадает с той, что реализована в ГА (см. рис. 6), однако пространством поиска ГП является не пространство пара R M всех возможных композиций функций мнометров, как в ГА, а множество жества — функциональный базис — набор до планируемого пустимых регулятора функций,  — терминальное множество. Функциональное множество могут составлять арифметические, математические, булевы и другие функции. В терминальное множество могут войти время, наблюдаемые фазовые переменные, константы или директивные команды. Синтез продукционных правил работы регулятора с помощью ГП гарантирует реализуемость синтезированных законов управле обеспения на заданной цифровой платформе. Определяя композицию чивающую получим оптимальную систему продукций вида. Программным средством, реализующим генетическое программирование, служит GPLAB (Genetic Programming Toolbox для MATLAB) [13]. Этот программный продукт не входит в поставляемый фирмой MathWorks набор дополнений пакета MATLAB, однако доступен для свободного скачивания. Основной его недостаток — скалярный характер искомого решения. Это не позволяет применять его в задачах с векторным решением, к которым относится задача продукционного синтеза регуляторов в общем случае. При участии автора была проведена переработка GPLAB с целью расширения его возможностей по одновременному поиску вектора решений [14, 15]. В таком варианте метод синтеза продукционой формы регулятора с использованием ГП может быть распространен на новый класс актуальных задач управления шагом срабатывания аритмического регулятора. В отличие от типичной задачи проектирования регулятора дискретного действия с постоянной скоростью срабатывания, которая сводится к выбору закона регулирования, обеспечивающего заданные показатели качества работы системы в условиях принятых ограничений, в ходе решения задачи синтеза аритмического регулятора определялись вместе с искомым законом регулирования и сами ограничения в форме оптимальных условия срабатывания вычисляется функция S и формирующая оптимальную систему продукций вида 

